     1                                  ; function5.asm for demonstration Calling Conventions from Sistem V ABI AMD64
     2                                  extern printf
     3                                  section .data
     4 00000000 4100                          first      db    "A",0
     5 00000002 4200                          second     db    "B",0
     6 00000004 4300                          third      db    "C",0
     7 00000006 4400                          fourth     db    "D",0
     8 00000008 4500                          fifth      db    "E",0
     9 0000000A 4600                          sixth      db    "F",0
    10 0000000C 4700                          seventh    db    "G",0
    11 0000000E 4800                          eighth     db    "H",0
    12 00000010 4900                          ninth      db    "I",0
    13 00000012 4A00                          tenth      db    "J",0
    14 00000014 54686520737472696E-           fmt1       db    "The string is: %s%s%s%s%s%s%s%s%s%s",10,0
    14 0000001D 672069733A20257325-
    14 00000026 732573257325732573-
    14 0000002F 25732573257325730A-
    14 00000038 00                 
    15 00000039 5049203D20252E3266-           fmt2       db    "PI = %.2f %d %.2f %.2f %d %d %.2f %d %.2f %.2f %.2f %d %.2f",10,0
    15 00000042 20256420252E326620-
    15 0000004B 252E32662025642025-
    15 00000054 6420252E3266202564-
    15 0000005D 20252E326620252E32-
    15 00000066 6620252E3266202564-
    15 0000006F 20252E32660A00     
    16 00000076 1F85EB51B81E0940              pi         dq    3.14
    17 0000007E CDCCCCCCCCEC5740              pi1        dq    95.7
    18 00000086 0000000000802A40              pi2        dq    13.25
    19 0000008E F6285C8FC2353540              pi3        dq    21.21
    20 00000096 3333333333733940              pi4        dq    25.45
    21 0000009E 48E17A14AE075940              pi5        dq    100.12
    22 000000A6 0AD7A3703DAA4040              pi6        dq    33.33
    23 000000AE EC51B81E85AB4540              pi7        dq    43.34
    24                                  section .bss
    25                                  section .text
    26                                        global main
    27                                  main:
    28 00000000 55                      push  rbp                                                ; Пролог функции.
    29 00000001 4889E5                  mov   rbp, rsp                                           ; Пролог функции.
    30 00000004 48BF-                         mov    rdi, fmt1                                   ; 1-й аргумент функции printf. Сначала используются регистры. 
    30 00000006 [1400000000000000] 
    31 0000000E 48BE-                         mov    rsi, first                                  ; 2-й аргумент функции printf.
    31 00000010 [0000000000000000] 
    32 00000018 48BA-                         mov    rdx, second                                 ; 3-й аргумент функции printf.
    32 0000001A [0200000000000000] 
    33 00000022 48B9-                         mov    rcx, third                                  ; 4-й аргумент функции printf.
    33 00000024 [0400000000000000] 
    34 0000002C 49B8-                         mov    r8,  fourth                                 ; 5-й аргумент функции printf.
    34 0000002E [0600000000000000] 
    35 00000036 49B9-                         mov    r9,  fifth                                  ; 6-й аргумент функции printf.
    35 00000038 [0800000000000000] 
    36 00000040 6A00                          push   0
    37 00000042 68[12000000]                  push   tenth                                       ; 11-й аргумент функции printf. Теперь начинается запись в стек в обратном порядке.
    38 00000047 68[10000000]                  push   ninth                                       ; 10-й аргумент функции printf.
    39 0000004C 68[0E000000]                  push   eighth                                      ; 9-й аргумент функции printf.
    40 00000051 68[0C000000]                  push   seventh                                     ; 8-й аргумент функции printf.
    41 00000056 68[0A000000]                  push   sixth                                       ; 7-й аргумент функции printf.
    42 0000005B B800000000                    mov    rax, 0                                      ; Регистр xmm не используется. Без использования чисел с плавающей точкой.
    43                                       
    44                                        ;and    rsp, 0xfffffffffffffff0                     ; Выравнивание стека по 16-байтовой границе (по адресу кратному 16).
    45 00000060 E8(00000000)                  call   printf
    46 00000065 4883E4F0                      and    rsp, 0xfffffffffffffff0                     ; Выравнивание стека по 16-байтовой границе (по адресу кратному 16).
    47 00000069 F20F100425-                   movsd  xmm0, [pi]                                  ; 2-й аргумент функции printf. 1-й аргумент с плавающей точкой. Вывод числа с плавающей точкой. 
    47 0000006E [76000000]         
    48 00000072 B808000000                    mov    rax, 8                                      ; Выводится 8 чисел с плавающей точкой.
    49 00000077 48BF-                         mov    rdi, fmt2                                   ; 1-й аргумент функции printf. 1-й целочисленный аргумент. 
    49 00000079 [3900000000000000] 
    50 00000081 BE11000000                    mov    rsi, 17                                     ; 3-й аргумент функции printf. 2-й целочисленный аргумент. 
    51 00000086 F20F100C25-                   movsd  xmm1, [pi1]                                 ; 4-й аргумент функции printf. 2-й аргумент с плавающей точкой.
    51 0000008B [7E000000]         
    52 0000008F F20F101425-                   movsd  xmm2, [pi2]                                 ; 5-й аргумент функции printf. 3-й аргумент с плавающей точкой. 
    52 00000094 [86000000]         
    53 00000098 BA12000000                    mov    rdx, 18                                     ; 6-й аргумент функции printf. 3-й целочисленный аргумент. 
    54 0000009D B913000000                    mov    rcx, 19                                     ; 7-й аргумент функции printf. 4-й целочисленный аргумент.
    55 000000A2 F20F101C25-                   movsd  xmm3, [pi3]                                 ; 8-й аргумент функции printf. 4-й аргумент с плавающей точкой.
    55 000000A7 [8E000000]         
    56 000000AB 41B814000000                  mov    r8, 20                                      ; 9-й аргумент функции printf. 5-й целочисленный аргумент.
    57 000000B1 F20F102425-                   movsd  xmm4, [pi4]                                 ; 10-й аргумент функции printf. 5-й аргумент с плавающей точкой.
    57 000000B6 [96000000]         
    58 000000BA F20F102C25-                   movsd  xmm5, [pi5]                                 ; 11-й аргумент функции printf. 6-й аргумент с плавающей точкой.
    58 000000BF [9E000000]         
    59 000000C3 F20F103425-                   movsd  xmm6, [pi6]                                 ; 12-й аргумент функции printf. 7-й аргумент с плавающей точкой.
    59 000000C8 [A6000000]         
    60 000000CC 41B915000000                  mov    r9, 21                                      ; 13-й аргумент функции printf. 6-й целочисленный аргумент.
    61 000000D2 F20F103C25-                   movsd  xmm7, [pi7]                                 ; 14-й аргумент функции printf. 8-й аргумент с плавающей точкой.
    61 000000D7 [AE000000]         
    62 000000DB E8(00000000)                  call   printf
    63 000000E0 C9                      leave
    64 000000E1 C3                      ret
